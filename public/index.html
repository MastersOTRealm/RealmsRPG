<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Welcome to Realms</title>
    <link rel="stylesheet" href="styles/main.css">
    <!-- update the version number as needed -->
    <script defer src="/__/firebase/11.3.0/firebase-app-compat.js"></script>
    <!-- include only the Firebase features as you need -->
    <script defer src="/__/firebase/11.3.0/firebase-auth-compat.js"></script>
    <script defer src="/__/firebase/11.3.0/firebase-database-compat.js"></script>
    <script defer src="/__/firebase/11.3.0/firebase-firestore-compat.js"></script>
    <script defer src="/__/firebase/11.3.0/firebase-functions-compat.js"></script>
    <script defer src="/__/firebase/11.3.0/firebase-messaging-compat.js"></script>
    <script defer src="/__/firebase/11.3.0/firebase-storage-compat.js"></script>
    <script defer src="/__/firebase/11.3.0/firebase-analytics-compat.js"></script>
    <script defer src="/__/firebase/11.3.0/firebase-remote-config-compat.js"></script>
    <script defer src="/__/firebase/11.3.0/firebase-performance-compat.js"></script>
    <!-- 
      initialize the SDK after all desired features are loaded, set useEmulator to false
      to avoid connecting the SDK to running emulators.
    -->
    <script defer src="/__/firebase/init.js?useEmulator=true"></script>
  </head>
  <body>
    <header id="header"></header>
    <main>
        <section class="hero">
            <h2>Welcome to Realms</h2>
            <p>Explore the world of Realms, create your characters, and define their powers.</p>
            <a href="/login.html" class="btn" onclick="onClick(event)">Get Started</a>
        </section>
        <section class="features">
            <div class="feature">
                <h3>Create Characters</h3>
                <p>Design your unique characters with detailed attributes and backgrounds.</p>
            </div>
            <div class="feature">
                <h3>Define Powers</h3>
                <p>Customize and create powerful abilities for your characters.</p>
            </div>
            <div class="feature">
                <h3>Join Adventures</h3>
                <p>Participate in epic adventures and quests with other players.</p>
            </div>
        </section>
    </main>
    <footer id="footer"></footer>
    <script type="module">
      import { initializeFirebase, handleAuthStateChange } from './scripts/auth.js';

      async function loadHeaderFooter() {
        const header = document.getElementById('header');
        const footer = document.getElementById('footer');
        if (header) {
          header.innerHTML = await fetch('/header.html').then(response => response.text());
        }
        if (footer) {
          footer.innerHTML = await fetch('/footer.html').then(response => response.text());
        }
      }
      loadHeaderFooter();

      document.addEventListener('DOMContentLoaded', async function() {
        const { auth, db } = await initializeFirebase();
        handleAuthStateChange(auth, db);
      });
    </script>
  </body>
</html>
